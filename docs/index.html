<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A tidy interface to financial data via Quandl.com • tidyquandl</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A tidy interface to financial data via Quandl.com">
<meta property="og:description" content="A tidy alternative to the `Quandl` package. Automatically batches and retries requests and ensures tibble outputs.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tidyquandl</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/tidyquandl-vs-quandl.html">Comparing `tidyquandl` to `Quandl`</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ClaytonJY/tidyquandl">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="tidyquandl" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tidyquandl" class="anchor"></a><code>tidyquandl</code>
</h1></div>

<p>The goal of <code>tidyquandl</code> is to be an easy-to-use and tidy interface to the <a href="https://www.quandl.com/">Quandl</a> API for financial data.</p>
<p>Core features:</p>
<ul>
<li>focuses on the Tables API (the good one)</li>
<li>returns tibbles (except for metadata)</li>
<li>always fetches all results (<code>paginate = TRUE</code> in <code>Quandl</code>)</li>
<li>automatically retries failed queries</li>
<li>automatically splits large queries into manageable ones (batching)</li>
<li>uses <code><a href="http://www.rdocumentation.org/packages/readr/topics/read_delim">readr::read_csv()</a></code> for speed and type inference</li>
<li>well-formatted errors</li>
</ul>
<p>This is not the only way to interact with Quandl from R; Quandl themselves maintain a <a href="https://github.com/quandl/quandl-r"><code>Quandl</code> R package</a> which covers a wider set of uses than <code>tidyquandl</code> (like the Timeseries API), but supports none of the above features. An earlier version of this package wrapped the Quandl one, but as of v0.1.2 the underlying code has been rewritten from scratch.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the release and development versions from <a href="https://github.com/">GitHub</a> wih the <code>devtools</code> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>

<span class="co"># latest release</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"claytonjy/tidyquandl@*release"</span>)

<span class="co"># latest development version</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"claytonjy/tidyquandl"</span>)</code></pre></div>
<p>I recommend using the release version in general, but be sure to install the development version when filing bugs and pull requests.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Before doing anything with the Quandl API, you’ll need an account; you can register for free at <a href="https://www.quandl.com/">Quandl</a>, and all examples use free datasets available to all registered users.</p>
<p>Then you need to obtain your API key (a string) from your <a href="https://www.quandl.com/account/api">account settings</a>. Storing this in an environment variable named <code>QUANDL_API_KEY</code> is easiest (e.g. via <code>.Renviron</code>), though isn’t strictly necessary.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># ~/.Renviron</span>
<span class="va">QUANDL_API_KEY=</span>my-ap1k3y</code></pre></div>
<p>Then we read that in via <code><a href="reference/quandl_key_set.html">quandl_key_set()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyquandl)

<span class="kw"><a href="reference/quandl_key_set.html">quandl_key_set</a></span>()  <span class="co"># can also pass key to this as argument</span></code></pre></div>
<p>Now we can call <code><a href="reference/quandl_datatable.html">quandl_datatable()</a></code> to interact with the Tables API. Here we use the <a href="https://www.quandl.com/databases/WIKIP">Wiki Prices database</a> to get one day of prices on Apple and Microsoft:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/quandl_datatable.html">quandl_datatable</a></span>(<span class="st">"WIKI/PRICES"</span>, <span class="dt">ticker =</span> <span class="kw">c</span>(<span class="st">"AAPL"</span>, <span class="st">"MSFT"</span>), <span class="dt">date =</span> <span class="st">"2018-01-02"</span>)
<span class="co">#&gt; # A tibble: 2 x 14</span>
<span class="co">#&gt;   ticker date        open  high   low close   volume `ex-dividend`</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 AAPL   2018-01-02 170.  172.  169.  172.  25048048             0</span>
<span class="co">#&gt; 2 MSFT   2018-01-02  86.1  86.3  85.5  86.0 21993101             0</span>
<span class="co">#&gt; # ... with 6 more variables: split_ratio &lt;dbl&gt;, adj_open &lt;dbl&gt;,</span>
<span class="co">#&gt; #   adj_high &lt;dbl&gt;, adj_low &lt;dbl&gt;, adj_close &lt;dbl&gt;, adj_volume &lt;dbl&gt;</span></code></pre></div>
<p>Unlike <code><a href="http://www.rdocumentation.org/packages/Quandl/topics/Quandl.datatable">Quandl::Quandl.datatable</a></code>, if an error is received (HTTP response 400+) the query will be retried automatically up to three times. It can also accept an unlimited number of <code>tickers</code>: behind the scenes, multiple queries will be made to avoid errors from passing Quandl too many parameters.</p>
<p>You can pass in any of the arguments you’re used to passing into <code><a href="http://www.rdocumentation.org/packages/Quandl/topics/Quandl.datatable">Quandl::Quandl.datatable</a></code> via the <code>...</code> args. Here we get only the closing prices for Apple over the span of two weeks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/quandl_datatable.html">quandl_datatable</a></span>(
  <span class="st">"WIKI/PRICES"</span>,
  <span class="dt">ticker =</span> <span class="st">"AAPL"</span>,
  <span class="dt">date.gte =</span> <span class="st">"2018-01-01"</span>, <span class="dt">date.lt =</span> <span class="st">"2018-01-15"</span>,
  <span class="dt">qopts.columns =</span> <span class="kw">c</span>(<span class="st">"ticker"</span>, <span class="st">"date"</span>, <span class="st">"close"</span>)
)
<span class="co">#&gt; # A tibble: 9 x 3</span>
<span class="co">#&gt;   ticker date       close</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 AAPL   2018-01-02  172.</span>
<span class="co">#&gt; 2 AAPL   2018-01-03  172.</span>
<span class="co">#&gt; 3 AAPL   2018-01-04  173.</span>
<span class="co">#&gt; 4 AAPL   2018-01-05  175 </span>
<span class="co">#&gt; 5 AAPL   2018-01-08  174.</span>
<span class="co">#&gt; 6 AAPL   2018-01-09  174.</span>
<span class="co">#&gt; 7 AAPL   2018-01-10  174.</span>
<span class="co">#&gt; 8 AAPL   2018-01-11  175.</span>
<span class="co">#&gt; 9 AAPL   2018-01-12  177.</span></code></pre></div>
<p>You can also use <code>tidyquandl</code> to fetch metadata about a table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/quandl_datatable_meta.html">quandl_datatable_meta</a></span>(<span class="st">"WIKI/PRICES"</span>)
<span class="co">#&gt; $vendor_code</span>
<span class="co">#&gt; [1] "WIKI"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $datatable_code</span>
<span class="co">#&gt; [1] "PRICES"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $name</span>
<span class="co">#&gt; [1] "Quandl End of Day Stocks Info"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $description</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $columns</span>
<span class="co">#&gt;           name              type</span>
<span class="co">#&gt; 1       ticker            String</span>
<span class="co">#&gt; 2         date              Date</span>
<span class="co">#&gt; 3         open BigDecimal(34,12)</span>
<span class="co">#&gt; 4         high BigDecimal(34,12)</span>
<span class="co">#&gt; 5          low BigDecimal(34,12)</span>
<span class="co">#&gt; 6        close BigDecimal(34,12)</span>
<span class="co">#&gt; 7       volume BigDecimal(37,15)</span>
<span class="co">#&gt; 8  ex-dividend BigDecimal(42,20)</span>
<span class="co">#&gt; 9  split_ratio            double</span>
<span class="co">#&gt; 10    adj_open BigDecimal(50,28)</span>
<span class="co">#&gt; 11    adj_high BigDecimal(50,28)</span>
<span class="co">#&gt; 12     adj_low BigDecimal(50,28)</span>
<span class="co">#&gt; 13   adj_close BigDecimal(50,28)</span>
<span class="co">#&gt; 14  adj_volume            double</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $filters</span>
<span class="co">#&gt; [1] "ticker" "date"  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $primary_key</span>
<span class="co">#&gt; [1] "ticker" "date"  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $premium</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $status</span>
<span class="co">#&gt; $status$refreshed_at</span>
<span class="co">#&gt; [1] "2018-03-27T23:54:20.000Z"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $status$status</span>
<span class="co">#&gt; [1] "ON TIME"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $status$expected_at</span>
<span class="co">#&gt; [1] "*"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $status$update_frequency</span>
<span class="co">#&gt; [1] "CONTINUOUS"</span></code></pre></div>
<p>Unlike <code><a href="reference/quandl_datatable.html">quandl_datatable()</a></code> this returns a list rather than a tibble. This can also be used on any table, including premium tables you haven’t paid for, which can be helpful to evaluate their usefullness beyond what you see in the documentation.</p>
</div>
<div id="roadmap" class="section level2">
<h2 class="hasAnchor">
<a href="#roadmap" class="anchor"></a>Roadmap</h2>
<p>The next big changes will be to allow for more <code>readr</code>-like control of types (issues #22, #27) and to improve documentation by making a <code>pkgdown</code> site (#9) and a vignette comparing this to the <code>Quandl</code> package more directly (#28).</p>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Your contributions are welcome! Issues, typo fixes, new functions, anything. See <code>.github/CONTRIBUTING.md</code> for more information.</p>
<p>To test &amp; check you’ll <em>need</em> to store your key in the <code>QUANDL_API_KEY</code> variable. I recommend creating an <code>.Renviron</code> file <em>in this directory</em>.</p>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ClaytonJY/tidyquandl">https://​github.com/​ClaytonJY/​tidyquandl</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ClaytonJY/tidyquandl/issues">https://​github.com/​ClaytonJY/​tidyquandl/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Clayton Yochum <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/ClaytonJY/tidyquandl"><img src="https://travis-ci.org/ClaytonJY/tidyquandl.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/ClaytonJY/tidyquandl"><img src="https://ci.appveyor.com/api/projects/status/github/ClaytonJY/tidyquandl?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/ClaytonJY/tidyquandl?branch=master"><img src="https://codecov.io/gh/ClaytonJY/tidyquandl/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Clayton Yochum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
